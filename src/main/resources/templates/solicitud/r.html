<h3 class="solicitudes-title text-center mb-4">Solicitudes de Desarrollador Pendientes</h3>

<div class="solicitudes-container container">
    <div class="solicitudes-list row gy-4">
        <div class="col-12" th:each="sol : ${solicitudes}">
            <div class="solicitud-card">
                <p class="solicitud-usuario"><strong>Usuario:</strong> <span th:text="${sol.usuario.nombre}">Nombre Usuario</span></p>
                <p class="solicitud-url"><strong>Portfolio URL:</strong>
                    <a th:href="${sol.portfolioUrl}" th:text="${sol.portfolioUrl}" target="_blank">Portfolio</a>
                </p>
                <p><strong>Biografía:</strong></p>
                <p class="solicitud-info" th:text="${sol.biografia}">Descripción biográfica...</p>

                <div class="solicitud-buttons">
                    <form th:action="@{/solicitud/aprobar}" method="post">
                        <input type="hidden" name="id" th:value="${sol.id}" />
                        <button type="submit" class="btn-aceptar">Aprobar</button>
                    </form>

                    <form th:action="@{/solicitud/rechazar}" method="post">
                        <input type="hidden" name="id" th:value="${sol.id}" />
                        <button type="submit" class="btn-rechazar">Rechazar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', function () {
        // Obtener el parámetro 'success' de la URL
        let urlParams = new URLSearchParams(window.location.search);
        let successMsg = urlParams.get('success');

        if (successMsg) {
            setTimeout(() => {
                alert(successMsg);
                removeQueryParam('success');
            }, 500);
        }

        function removeQueryParam(param) {
            const url = new URL(window.location);
            url.searchParams.delete(param);
            window.history.replaceState({}, document.title, url.toString());
        }
    });
</script>