<div class="biblioteca-contenedor">
  <!-- Lista de juegos -->
  <aside class="lista-juegos">
    <ul>
      <li th:each="juego : ${juegos}" class="juego-item"
          th:onclick="'mostrarDetalles(' + ${juego.id} + ')'">
        <img class="juego-miniatura"
             th:src="${juego.portada != null} ? @{/uploads/} + ${juego.portada.ruta} : @{/img/default-portada.png}" />
        <span class="juego-nombre" th:text="${juego.nombre}"></span>

        <!-- Datos ocultos para JS -->
        <div class="juego-detalles"
             th:id="'detalle-' + ${juego.id}" style="display:none;"
             th:data-nombre="${juego.nombre}"
             th:data-descripcion="${juego.descripcion}"
             th:data-precio="${juego.precio.cantidad}"
             th:data-imagenes="${#strings.listJoin(juego.imagenes.?[ruta != null].![('/uploads/' + ruta)], ',')}">
        </div>
      </li>
    </ul>
  </aside>

  <!-- Panel de detalles -->
  <section class="detalle-juego" id="detalle-juego">
    <p>Selecciona un juego para ver los detalles.</p>
  </section>
</div>

<script>
function mostrarDetalles(id) {
  const detalle = document.getElementById(`detalle-${id}`);

  const nombre = detalle.getAttribute('data-nombre');
  const descripcion = detalle.getAttribute('data-descripcion');
  const precio = detalle.getAttribute('data-precio');
  const imagenes = detalle.getAttribute('data-imagenes').split(',');

  const panel = document.getElementById('detalle-juego');

  let imagenesHtml = '<div class="imagenes-juego">';
  imagenes.forEach(src => {
    imagenesHtml += `<img src="${src.trim()}" alt="Imagen del juego" />`;
  });
  imagenesHtml += '</div>';

  panel.innerHTML = `
    <h2>${nombre}</h2>
    <p><strong>Precio:</strong> ${precio} €</p>
    <p><strong>Descripción:</strong><br>${descripcion}</p>
    ${imagenesHtml}
  `;
}
</script>
